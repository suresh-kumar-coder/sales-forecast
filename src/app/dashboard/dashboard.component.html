<app-navbar></app-navbar>
<div class=" body" *ngIf="showContent && loader==false">
    
    <div class="main-plot" [chart]="chart"></div>

    <div class="d-flex align-items-center justify-content-center my-5">
        <hr style="width: 15%;border-width: 2px ;color:black">
        <p class="text-center font1 mx-2 mb-0">
            Insights
        </p>
        <hr style="width: 15%;border-width: 2px ;color:black">
    </div>

    <div class="container">
        <div class="insights  mt-4" >
            <div class="head d-flex align-items-center justify-content-center ">
                <p class="text-center m-0">Daily</p>
            </div>
            <div class="i-block py-2 px-3 d-flex justify-content-between align-items-center" *ngFor="let item of daily">
                <div class="d-flex flex-column justify-content-center">
                    <p class="font3 m-0 ">{{item[0]}}</p>
                    <p class="m-0 font2">{{item[1]}}</p>
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <p class="m-0 font3" [style.color] =  "item[2]>0 ? 'green' : 'red'">{{item[2]}}%</p>
                </div>
            </div>
    
        </div>
    
        <div class="insights  mt-5" *ngIf="weekly_f">
            <div class="head d-flex align-items-center justify-content-center ">
                <p class="text-center m-0">Weekly</p>
            </div>
            <div class="i-wm-block py-2 px-3 d-flex justify-content-between align-items-center" *ngFor="let item of week_sale; let i=index">
                <div class="d-flex flex-column justify-content-center">
                    <p class="font3 m-0 ">Week {{i+1}}</p>
                    <p class="m-0 font2">{{week_sale[i]}}</p>
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <p class="m-0 font3" [style.color] =  "week_error[i]>0 ? 'green' : 'red'">{{week_error[i]}}%</p>
                </div>
            </div>
    
        </div>
    
        <div class="insights  mt-5" *ngIf="monthly_f" >
            <div class="head d-flex align-items-center justify-content-center ">
                <p class="text-center m-0">Monthly</p>
            </div>
            <div class="i-wm-block py-2 px-3 d-flex justify-content-between align-items-center" *ngFor="let item of m_sale; let i=index">
                <div class="d-flex flex-column justify-content-center">
                    <p class="font3 m-0 ">Month {{i+1}}</p>
                    <p class="m-0 font2">{{m_sale[i]}}</p>
                </div>
                <div class="d-flex justify-content-center align-items-center">
                    <p class="m-0 font3" [style.color] =  "m_error[i]>0 ? 'green' : 'red'">{{m_error[i]}}%</p>
                </div>
            </div>
    
        </div>
    </div>

    <div class="d-flex align-items-center justify-content-center mt-5 mb-4">
        <hr style="width: 15%;border-width: 2px ;color:black">
        <p class="text-center font1 mx-2 mb-0">
            Evaluation Metrics
        </p>
        <hr style="width: 15%;border-width: 2px ;color:black">
    </div>

    <div class="data-display pb-5 container">
        <div class="block mt-4 py-2 px-3">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex flex-column me-4">
                    <p class="font1 mb-1">MAE</p>
                    <p class="font2 m-0">Mean Absolute Error</p>
                </div>
                <div class="val">
                    {{valConversion(stat['MAE'])}}
                </div>
            </div>
        </div>
        <div class="block mt-4 py-2 px-3">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex flex-column me-4">
                    <p class="font1 mb-1">MSE</p>
                    <p class="font2 m-0">Mean Square Error</p>
                </div>
                <div class="val">
                    {{valConversion(stat['MSE'])}}
                </div>
            </div>
        </div>
        <div class="block mt-4 py-2 px-3">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex flex-column me-4">
                    <p class="font1 mb-1">RMSE</p>
                    <p class="font2 m-0">Root Mean Square Error</p>
                </div>
                <div class="val">
                    {{valConversion(stat['RMSE'])}}
                </div>
            </div>
        </div>
        <div class="block mt-4 py-2 px-3">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex flex-column me-4">
                    <p class="font1 mb-1">MAPE</p>
                    <p class="font2 m-0">Mean Absolute Percentage </p>
                </div>
                <div class="val">
                    {{stat['MAPE']}}%
                </div>
            </div>
        </div>
        <div class="block mt-4 py-2 px-3">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex flex-column me-4">
                    <p class="font1 m-0">Accuracy</p>
                </div>
                <div class="val">
                    {{stat['Accuracy']}}%
                </div>
            </div>
        </div>
    </div>
   
    <footer class="bg-primary">
        <div class="text-center text-white">
            <p class='m-0 py-2'>&copy; 2024 Sale Forecast. All rights reserved.</p>
        </div>
    </footer>
</div>

<div class="redirect d-flex justify-content-center align-items-center" *ngIf="!showContent">
    <div class="content d-flex flex-column align-items-center">
        <img src="../../assets/image.png" width="350px" alt="">
        <span class="font mb-3">
            Forecast Data Not Available
        </span>
        
        <span class="">
            Redirecting to Forecast Page in {{sec}} sec.
        </span>
    </div>
</div>

<div class="loader" *ngIf="loader">
    <i class="fa fa-spinner fa-pulse"></i>
</div>
